jQuery(document).ready(function(e){var a,o,t,c,d,s=e("#podmotor_account_api_token"),n=e(".js-parent-category"),{}=wp.i18n;function l(){var s=e(this),a=s.data("subcategory"),n=s.find("option:selected").text();if(!a||!n)return!1;s=e("#"+a);s.find("optgroup").hide();a=s.find('optgroup[label="'+n+'"]');a.length&&"-- None --"!==n?a.show():s.val("")}function i(){return e(d+" input[type=checkbox]:checked")}function r(){t.prop("disabled",0===i().length)}o=e(".castos-connect"),0<s.length&&(s.length&&o.show(),s.on("focus change paste keydown keyup",function(){s.val()?o.prop("disabled","").removeClass("disabled"):o.prop("disabled","disabled")}),s.on("focus",function(){e(".connect-castos-message").html("").removeClass("error")}),o.on("click",function(s){var a,n;s.preventDefault(),s.stopPropagation(),o.hasClass("disabled")||(o.prop("disabled","disabled"),o.trigger("connecting"),a=e("#podmotor_account_api_token").val(),s=e("#podcast_settings_tab_nonce").val(),(n=e(".connect-castos-message")).length?n.html("").removeClass("error"):(n=e('<span class="connect-castos-message"></span>'),o.parent().append(n)),o.addClass("loader"),e.ajax({method:"GET",url:ajaxurl,data:{action:"connect_castos",api_token:a,nonce:s}}).done(function(s){o.trigger("connected",s),"success"===s.status?(o.addClass("connected"),o.data("no-reload")?n.html(s.message):window.location.reload()):(o.removeClass("loader"),n.addClass("error"),n.html(s.message))}))})),(a=e("#disconnect_castos")).on("click",function(s){!0===confirm("If you disconnect from Castos hosting you will no longer be able to upload media files to the Castos hosting platform. If youâ€™re no longer a Castos customer your media files may no longer be available to your listeners.")&&(a.addClass("loader"),a.parent().find("label").remove(),e.ajax({method:"GET",url:ajaxurl,data:{action:"disconnect_castos",nonce:e("#podcast_settings_tab_nonce").val()}}).done(function(s){window.location.reload()}))}),n.length&&(n.each(l),n.on("change",l)),t=e("#trigger_sync"),c=e("#podcast_settings_tab_nonce").val(),d=".js-sync-podcast",t.length&&(r(),e(d+" input[type=checkbox]").on("change",function(){r()}),t.on("click",function(){t.addClass("loader");var a=e(".ssp-sync-msg"),s=i(),n=[];a.length||(a=e('<span class="ssp-sync-msg"></span>'),t.parent().append(a)),s.each(function(){n.push(e(this).val())}),e.ajax({method:"GET",url:ajaxurl,data:{action:"sync_castos",nonce:c,podcasts:n}}).done(function(s){var n='<div class="sync-overview">'+s.data.msg+"</div>";e.each(s.data.podcasts,function(s,a){!function(s,a,n=""){(s=s.closest(d).find(".js-sync-status")).removeClass("synced_with_errors success none sending failed").addClass(a),n&&s.find("span").html(n)}(e("#podcasts_sync_"+s),a.status,a.title),n+='<div class="sync-msg">'+a.msg+"</div>"}),t.removeClass("loader"),a.addClass(s.success?"success":"error"),a.html(n)})}))});